<script>
function calculateChmod() {
    // Calcula valor numérico
    const owner = (document.getElementById('ownerRead').checked ? 4 : 0) +
                  (document.getElementById('ownerWrite').checked ? 2 : 0) +
                  (document.getElementById('ownerExecute').checked ? 1 : 0);
    const group = (document.getElementById('groupRead').checked ? 4 : 0) +
                  (document.getElementById('groupWrite').checked ? 2 : 0) +
                  (document.getElementById('groupExecute').checked ? 1 : 0);
    const other = (document.getElementById('otherRead').checked ? 4 : 0) +
                  (document.getElementById('otherWrite').checked ? 2 : 0) +
                  (document.getElementById('otherExecute').checked ? 1 : 0);
    const chmodNumeric = `${owner}${group}${other}`;

    // Converte para simbólico (rwxr-xr--)
    const toSymbolic = (read, write, execute) => {
        return (read ? 'r' : '-') + (write ? 'w' : '-') + (execute ? 'x' : '-');
    };

    const ownerSym = toSymbolic(
        document.getElementById('ownerRead').checked,
        document.getElementById('ownerWrite').checked,
        document.getElementById('ownerExecute').checked
    );
    const groupSym = toSymbolic(
        document.getElementById('groupRead').checked,
        document.getElementById('groupWrite').checked,
        document.getElementById('groupExecute').checked
    );
    const otherSym = toSymbolic(
        document.getElementById('otherRead').checked,
        document.getElementById('otherWrite').checked,
        document.getElementById('otherExecute').checked
    );
    const chmodSymbolic = `${ownerSym}${groupSym}${otherSym}`;

    // Gera explicação humana
    const explain = (label, read, write, execute) => {
        const parts = [];
        if (read) parts.push('leitura');
        if (write) parts.push('escrita');
        if (execute) parts.push('execução');
        return parts.length ? `${label}: ${parts.join(' + ')}` : `${label}: nenhuma`;
    };

    const explanation = [
        explain('Dono', 
            document.getElementById('ownerRead').checked,
            document.getElementById('ownerWrite').checked,
            document.getElementById('ownerExecute').checked),
        explain('Grupo',
            document.getElementById('groupRead').checked,
            document.getElementById('groupWrite').checked,
            document.getElementById('groupExecute').checked),
        explain('Outros',
            document.getElementById('otherRead').checked,
            document.getElementById('otherWrite').checked,
            document.getElementById('otherExecute').checked)
    ].join(' | ');

    // Atualiza interface
    document.getElementById('chmodResult').innerHTML = `
        <div style="font-size: 1.2em; font-family: monospace; color: #8bc34a; margin: 10px 0;">
            chmod ${chmodNumeric} arquivo
        </div>
        <div style="font-size: 1.1em; font-family: monospace; color: #e0e0e0; margin: 10px 0;">
            ${chmodSymbolic}
        </div>
        <div style="font-size: 0.9em; color: #aaa; margin: 10px 0;">
            ${explanation}
        </div>
    `;

    // Alerta de segurança (se for 777)
    const warningDiv = document.getElementById('chmodWarning');
    if (chmodNumeric === '777') {
        warningDiv.style.display = 'block';
    } else {
        warningDiv.style.display = 'none';
    }
}
</script>

