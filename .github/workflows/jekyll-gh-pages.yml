# Nome do seu workflow
name: Jekyll Site CI

# Define quando o workflow deve rodar. Neste caso, a cada push para o branch 'main'.
on:
  push:
    branches:
      - main # Altere para o seu branch principal, se for diferente

  # Permite rodar o workflow manualmente através da aba Actions do GitHub
  workflow_dispatch:

# Define os jobs que serão executados
jobs:
  build-and-deploy:
    # O tipo de máquina virtual onde o job vai rodar. Ubuntu é uma escolha comum.
    runs-on: ubuntu-latest

    # Define os passos do job
    steps:
      # 1. Faz checkout do código do seu repositório
      - name: Checkout
        uses: actions/checkout@v4 # Use a versão mais recente da action de checkout

      # 2. Configura o ambiente Ruby. Especifique a versão que seu Jekyll usa.
      - name: Setup Ruby
        uses: ruby/setup-ruby@v1
        with:
          ruby-version: '3.3' # Use a versão do Ruby que você usa localmente ou a recomendada para o Jekyll
          bundler-cache: true # Esta opção é útil para cachear gems, acelerando builds futuras

      # 3. Instala as dependências do Jekyll (gems)
      - name: Install Dependencies
        run: bundle install --jobs 4 --retry 3 # Instala gems do Gemfile

      # 4. Constrói o site Jekyll
      - name: Build Jekyll
        run: bundle exec jekyll build --baseurl ${{ github.event.inputs.baseurl || '' }} # Constrói o site. --baseurl é opcional dependendo da sua configuração.
        env:
          JEKYLL_ENV: production # Define o ambiente como produção

      # 5. Configura o GitHub Pages para deploy
      # Esta action é usada para preparar os artefatos para deploy no GitHub Pages
      - name: Setup GitHub Pages
        uses: actions/configure-pages@v4

      # 6. Cria um artefato com os arquivos construídos do site
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          # O diretório onde o Jekyll constrói o site é geralmente '_site'
          path: '_site'

      # 7. Faz o deploy dos artefatos para o GitHub Pages
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4




    
     
