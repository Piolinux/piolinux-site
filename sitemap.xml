---
layout: null
# Exclui o próprio sitemap de ser listado dentro dele mesmo
sitemap: exclude: true 
---
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">

{% comment %}
    Loop pelos posts do blog
{% endcomment %}
{% for post in site.posts %}
  {% unless post.sitemap.exclude %}
    <url>
      <loc>{{ site.url }}{{ post.url }}</loc>
      {% if post.last_modified_at %}
        <lastmod>{{ post.last_modified_at | date_to_xmlschema }}</lastmod>
      {% elsif post.date %}
        <lastmod>{{ post.date | date_to_xmlschema }}</lastmod>
      {% endif %}
      <changefreq>monthly</changefreq>
      <priority>0.8</priority>
    </url>
  {% endunless %}
{% endfor %}

{% comment %}
  Combina posts e páginas em um único array
{% endcomment %}
{% assign pages = site.pages | concat: site.posts %}

{% for item in pages %}

  {% comment %}
    Variáveis para simplificar o filtro
  {% endcomment %}
  {% assign current_url = item.url | remove: "index.html" %}
  {% assign is_excluded = item.sitemap.exclude %}
  
  {% comment %}
    EXCLUI: Arquivos que terminam em .xml, pastas de paginação (/pageN), e páginas marcadas com sitemap: exclude: true
  {% endcomment %}
  {% unless current_url contains '.xml' or current_url contains '/page' or is_excluded %}

    <url>
      <loc>{{ site.url }}{{ current_url }}</loc>
      
      ... [ O restante do seu código de lastmod, changefreq e priority ] ...
      
    </url>

  {% endunless %}

{% endfor %}

</urlset>
